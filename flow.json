{
  "commands": [
    { "cmd": "/start", "desc": "Запуск бота" },
    { "cmd": "/price", "desc": "Прайс на услуги" },
    { "cmd": "/order", "desc": "Сделать заказ файла" },
    { "cmd": "/help", "desc": "Помощь и контакты" }
  ],
  "automations": {
    "unsubscribe_keywords": ["Стоп", "Отписка", "Stop"],
    "consent_keywords": ["Согласен", "Да", "Подписаться"]
  },
  "flow": {
    "start": {
      "message": "Привет! Это GTClub File Service.\nВыберите действие:",
      "keyboard": [
        [
          { "text": "Сделать заказ", "goto": "order_intro" }
        ],
        [
          { "text": "Прайс", "goto": "price" },
          { "text": "Помощь", "goto": "help" }
        ]
      ]
    },

    "price": {
      "message": "Прайс (кратко):\n• PDF/Word верстка — от 200 грн\n• Презентации — от 300 грн\n• Таблицы/Excel — от 250 грн\n\nДля заказа нажмите «Сделать заказ».",
      "keyboard": [
        [
          { "text": "Сделать заказ", "goto": "order_intro" }
        ],
        [
          { "text": "⬅️ В начало", "goto": "start" }
        ]
      ]
    },

    "help": {
      "message": "Помощь и контакты:\n• Телеграм: @gtclub_info\n• Сайт: gtclub.info\n\nНапишите «Согласен» чтобы получать важные сообщения (скидки/обновления).",
      "keyboard": [
        [
          { "text": "⬅️ В начало", "goto": "start" }
        ]
      ]
    },

    "order_intro": {
      "message": "2) Кто вы?",
      "keyboard": [
        [
          { "text": "Фрилансер", "set": { "profile.role": "freelancer" }, "goto": "city" },
          { "text": "Заказчик", "set": { "profile.role": "client" }, "goto": "city" }
        ],
        [
          { "text": "⬅️ В начало", "goto": "start" }
        ]
      ]
    },

    "city": {
      "message": "3) Город/страна? (например: Днепр, Украина)",
      "expect": {
        "type": "text",
        "field": "profile.location",
        "required": true,
        "validators": [
          { "type": "minlen", "value": 2 }
        ]
      },
      "next": "contact_channel",
      "keyboard": [
        [
          { "text": "⬅️ В начало", "goto": "start" }
        ]
      ]
    },

    "contact_channel": {
      "message": "4) Где удобно получать файлы/связь?",
      "keyboard": [
        [
          { "text": "Telegram", "toggle": { "contact.channels": "telegram" } },
          { "text": "WhatsApp", "toggle": { "contact.channels": "whatsapp" } },
          { "text": "Email", "toggle": { "contact.channels": "email" } }
        ],
        [
          { "text": "✅ Готово", "goto": "contact_input" }
        ],
        [
          { "text": "⬅️ В начало", "goto": "start" }
        ]
      ]
    },

    "contact_input": {
      "message": "Оставь контакт для отправки материалов и связи (например: @ник в TG, номер WA или email):",
      "expect": {
        "type": "text",
        "field": "contact.value",
        "required": true,
        "validators": [
          {
            "type": "regex_any",
            "value": "(@\\w{3,}|\\+?\\d[\\d\\s-]{7,}|[\\w.%-]+@[\\w.-]+\\.[A-Za-z]{2,})"
          }
        ]
      },
      "next": "summary",
      "keyboard": [
        [
          { "text": "⬅️ В начало", "goto": "start" }
        ]
      ]
    },

    "summary": {
      "message": "Спасибо! Мы свяжемся с вами в ближайшее время.\nЕсли хотите — пришлите файл прямо сюда.",
      "notify_admin": true,
      "deliver": [],
      "keyboard": [
        [
          { "text": "⬅️ В начало", "goto": "start" }
        ]
      ]
    }
  }
}
