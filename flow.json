{
  "bot": {
    "name": "GTClub File Service",
    "locale": "ru",
    "version": "1.0.0",
    "webhook_url": "USE_BASE_URL/webhook/TELEGRAM_TOKEN",
    "admin_chat_id": "REPLACE_WITH_ADMIN_CHAT_ID",
    "notify_email": "gtclub.com.ua@gmail.com"
  },
  "commands": [
    {
      "cmd": "/start",
      "desc": "–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"
    },
    {
      "cmd": "/price",
      "desc": "–ü—Ä–∞–π—Å –Ω–∞ —É—Å–ª—É–≥–∏"
    },
    {
      "cmd": "/order",
      "desc": "–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑ —Ñ–∞–π–ª–∞"
    },
    {
      "cmd": "/help",
      "desc": "–ü–æ–º–æ—â—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã"
    }
  ],
  "flow": {
    "start": {
      "message": "üëã –ü—Ä–∏–≤–µ—Ç! –¢—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è —á–∏–ø-—Ç—é–Ω–∏–Ω–≥–æ–º –∏–ª–∏ –∞–≤—Ç–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π?\n–Ø –ø–æ–º–æ–≥—É: –ø—Ä–∞–π—Å, —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª, –∑–∞–∫–∞–∑, –ø–æ–¥–¥–µ—Ä–∂–∫–∞.\n\n–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∏–∂–µ:",
      "keyboard": [
        [
          {
            "text": "üíº –î–∞, —è —Ç—é–Ω–∏–Ω–≥/–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",
            "goto": "collect_profile"
          }
        ],
        [
          {
            "text": "üëÄ –Ø —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Å—å",
            "goto": "lead_magnet"
          }
        ],
        [
          {
            "text": "‚ÑπÔ∏è –ü–æ–º–æ—â—å",
            "goto": "help"
          }
        ]
      ]
    },
    "lead_magnet": {
      "message": "üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: —á–µ–∫-–ª–∏—Å—Ç ¬´10 –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ç—é–Ω–∏–Ω–≥–µ Mercedes¬ª (PDF) –∏ –º–∏–Ω–∏-–≥–∞–π–¥ –ø–æ –≤—ã–±–æ—Ä—É —Å–æ—Ñ—Ç–∞.\n–û—Å—Ç–∞–≤—å –∫–æ–Ω—Ç–∞–∫—Ç –∏ –ø–æ–ª—É—á–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:",
      "keyboard": [
        [
          {
            "text": "üì• –ü–æ–ª—É—á–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç",
            "goto": "collect_contact"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
            "goto": "start"
          }
        ]
      ]
    },
    "collect_profile": {
      "message": "–û—Ç–ª–∏—á–Ω–æ! –ü–∞—Ä—É –≤–æ–ø—Ä–æ—Å–æ–≤, —á—Ç–æ–±—ã –¥–∞—Ç—å –Ω—É–∂–Ω—ã–π –ø—Ä–∞–π—Å.\n1) –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?",
      "expect": {
        "type": "text",
        "field": "name",
        "required": true
      },
      "next": "collect_role"
    },
    "collect_role": {
      "message": "2) –¢–≤–æ—è —Ä–æ–ª—å?\n–í—ã–±–µ—Ä–∏ –∫–Ω–æ–ø–∫—É:",
      "keyboard": [
        [
          {
            "text": "–°–¢–û / –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è",
            "set": {
              "role": "workshop"
            },
            "goto": "collect_city"
          },
          {
            "text": "–§—Ä–∏–ª–∞–Ω—Å–µ—Ä",
            "set": {
              "role": "freelancer"
            },
            "goto": "collect_city"
          }
        ],
        [
          {
            "text": "–î–∏—Å—Ç—Ä–∏–±—å—é—Ç–æ—Ä/–ø–∞—Ä—Ç–Ω—ë—Ä",
            "set": {
              "role": "partner"
            },
            "goto": "collect_city"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
            "goto": "collect_profile"
          }
        ]
      ]
    },
    "collect_city": {
      "message": "3) –ì–æ—Ä–æ–¥/—Å—Ç—Ä–∞–Ω–∞? (–Ω–∞–ø—Ä–∏–º–µ—Ä: –î–Ω–µ–ø—Ä, –£–∫—Ä–∞–∏–Ω–∞)",
      "expect": {
        "type": "text",
        "field": "city",
        "required": true
      },
      "next": "collect_channels"
    },
    "collect_channels": {
      "message": "4) –ì–¥–µ —É–¥–æ–±–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Ñ–∞–π–ª—ã/—Å–≤—è–∑—å?",
      "keyboard": [
        [
          {
            "text": "Telegram",
            "toggle": {
              "channels": "telegram"
            }
          },
          {
            "text": "WhatsApp",
            "toggle": {
              "channels": "whatsapp"
            }
          },
          {
            "text": "Email",
            "toggle": {
              "channels": "email"
            }
          }
        ],
        [
          {
            "text": "‚úÖ –ì–æ—Ç–æ–≤–æ",
            "goto": "collect_contact"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
            "goto": "collect_city"
          }
        ]
      ],
      "multi_select_hint": "–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏ –Ω–∞–∂–∞—Ç—å ¬´–ì–æ—Ç–æ–≤–æ¬ª."
    },
    "collect_contact": {
      "message": "–û—Å—Ç–∞–≤—å –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ —Å–≤—è–∑–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: @–Ω–∏–∫ –≤ TG, –Ω–æ–º–µ—Ä WA –∏–ª–∏ email):",
      "expect": {
        "type": "text",
        "field": "contact",
        "required": true,
        "validators": [
          {
            "type": "minlen",
            "value": 3
          },
          {
            "type": "regex_any",
            "value": "(^@\\w+)|(\\+?\\d[\\d\\s\\-]{6,})|([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,})"
          }
        ]
      },
      "next": "interest_brands"
    },
    "interest_brands": {
      "message": "–ö–∞–∫–∏–µ –±—Ä–µ–Ω–¥—ã —á–∞—â–µ –≤—Å–µ–≥–æ –¥–µ–ª–∞–µ—à—å? (–º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å: Mercedes, BMW, VAG, Mazda...)",
      "expect": {
        "type": "text",
        "field": "brands",
        "required": false
      },
      "next": "menu_main"
    },
    "menu_main": {
      "message": "–ì–æ—Ç–æ–≤–æ ‚úÖ –ß—Ç–æ –¥–∞–ª—å—à–µ?",
      "keyboard": [
        [
          {
            "text": "üíµ –ü—Ä–∞–π—Å",
            "goto": "price"
          },
          {
            "text": "üõ† –ó–∞–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª",
            "goto": "order_intro"
          }
        ],
        [
          {
            "text": "üéÅ –ü–æ–ª—É—á–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç",
            "goto": "send_leadmagnet"
          },
          {
            "text": "üë®‚Äçüíª –ü–æ–¥–¥–µ—Ä–∂–∫–∞",
            "goto": "support"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –í –Ω–∞—á–∞–ª–æ",
            "goto": "start"
          }
        ]
      ],
      "notify_admin": true
    },
    "price": {
      "message": "üíµ –ü—Ä–∞–π—Å (–±—ã—Å—Ç—Ä—ã–µ —Å—Ä–æ–∫–∏, —Ç–æ–ø-–∫–∞—á–µ—Å—Ç–≤–æ GTClub):\n‚Ä¢ Stage 1‚Äì3: –æ—Ç 49‚Ç¨\n‚Ä¢ DPF/EGR/AdBlue/SCR/TVA OFF: –æ—Ç 35‚Ç¨\n‚Ä¢ Pops&Bangs/Crackle: –æ—Ç 30‚Ç¨\n‚Ä¢ TCU/–ê–ö–ü–ü: –æ—Ç 59‚Ç¨\n‚Ä¢ Mercedes-AMG (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ): –æ—Ç 79‚Ç¨\n\n–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–∞–π—Å –≤ PDF?",
      "keyboard": [
        [
          {
            "text": "üìÑ –ü—Ä–∏—Å–ª–∞—Ç—å PDF",
            "goto": "send_pricepdf"
          }
        ],
        [
          {
            "text": "üõ† –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑",
            "goto": "order_intro"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
            "goto": "menu_main"
          }
        ]
      ]
    },
    "order_intro": {
      "message": "–î–ª—è –∑–∞–∫–∞–∑–∞ –ø—Ä–∏—à–ª–∏ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ –∏ —Ñ–∞–π–ª —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è.\n–ì–æ—Ç–æ–≤?",
      "keyboard": [
        [
          {
            "text": "üì¶ –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É",
            "goto": "order_form_brand"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
            "goto": "menu_main"
          }
        ]
      ]
    },
    "order_form_brand": {
      "message": "–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: Mercedes C63S W205):",
      "expect": {
        "type": "text",
        "field": "order.brand_model",
        "required": true
      },
      "next": "order_form_year"
    },
    "order_form_year": {
      "message": "–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 2018):",
      "expect": {
        "type": "text",
        "field": "order.year",
        "required": true,
        "validators": [
          {
            "type": "regex",
            "value": "^(19|20)\\d{2}$"
          }
        ]
      },
      "next": "order_form_ecu"
    },
    "order_form_ecu": {
      "message": "ECU/TCU (–µ—Å–ª–∏ –∑–Ω–∞–µ—à—å):",
      "expect": {
        "type": "text",
        "field": "order.ecu",
        "required": false
      },
      "next": "order_form_stage"
    },
    "order_form_stage": {
      "message": "–í—ã–±–µ—Ä–∏ —Ç–∏–ø —Ä–∞–±–æ—Ç:",
      "keyboard": [
        [
          {
            "text": "Stage 1",
            "set": {
              "order.stage": "Stage 1"
            },
            "goto": "order_form_file"
          },
          {
            "text": "Stage 2",
            "set": {
              "order.stage": "Stage 2"
            },
            "goto": "order_form_file"
          }
        ],
        [
          {
            "text": "DPF/EGR/AdBlue OFF",
            "set": {
              "order.stage": "ECO OFF"
            },
            "goto": "order_form_file"
          },
          {
            "text": "TCU/–ê–ö–ü–ü",
            "set": {
              "order.stage": "TCU"
            },
            "goto": "order_form_file"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
            "goto": "order_intro"
          }
        ]
      ]
    },
    "order_form_file": {
      "message": "–ü—Ä–∏—à–ª–∏ —Ñ–∞–π–ª —á—Ç–µ–Ω–∏—è (bin/ori) –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç üìé.\n–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–∂–µ–ª–∞–Ω–∏—è –ø–æ –∫–∞–ª–∏–±—Ä–æ–≤–∫–µ).",
      "expect": {
        "type": "file_or_text",
        "field": "order.file_or_comment",
        "required": true
      },
      "next": "order_confirm"
    },
    "order_confirm": {
      "message": "–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç ‚úÖ\n–ú—ã —Å–≤—è–∂–µ–º—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –æ–ø–ª–∞—Ç—ã. –û–±—ã—á–Ω–æ –æ—Ç–≤–µ—Ç –ø–æ —Ñ–∞–π–ª—É ‚Äî –±—ã—Å—Ç—Ä–æ.\n–ù—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å—Å—è –≤—Ä—É—á–Ω—É—é?",
      "keyboard": [
        [
          {
            "text": "üë®‚Äçüíª –°–≤—è–∑–∞—Ç—å—Å—è —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º",
            "goto": "support"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –í –º–µ–Ω—é",
            "goto": "menu_main"
          }
        ]
      ],
      "notify_admin": true,
      "create_ticket": true
    },
    "send_leadmagnet": {
      "message": "–û—Ç–ø—Ä–∞–≤–ª—è—é —á–µ–∫-–ª–∏—Å—Ç –∏ –º–∏–Ω–∏-–≥–∞–π–¥ üì©",
      "deliver": [
        {
          "type": "document",
          "title": "Checklist_Mercedes_Tuning_GTClub.pdf",
          "url": "https://gtclub.info/files/Checklist_Mercedes_Tuning_GTClub.pdf"
        },
        {
          "type": "document",
          "title": "MiniGuide_Software_Selection.pdf",
          "url": "https://gtclub.info/files/MiniGuide_Software_Selection.pdf"
        }
      ],
      "next": "menu_main"
    },
    "send_pricepdf": {
      "message": "–í–æ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–∞–π—Å –≤ PDF üìÑ",
      "deliver": [
        {
          "type": "document",
          "title": "GTClub_Price.pdf",
          "url": "https://gtclub.info/files/GTClub_Price.pdf"
        }
      ],
      "next": "menu_main"
    },
    "support": {
      "message": "–ù–∞–ø–∏—à–∏ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Äî –ø–µ—Ä–µ–¥–∞–º –æ–ø–µ—Ä–∞—Ç–æ—Ä—É.\n–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã: @gtclub.info –∏ email gtclub.com.ua@gmail.com",
      "expect": {
        "type": "text_or_file",
        "field": "support.message",
        "required": true
      },
      "next": "support_thanks",
      "notify_admin": true
    },
    "support_thanks": {
      "message": "–°–ø–∞—Å–∏–±–æ! –û–ø–µ—Ä–∞—Ç–æ—Ä —Å–∫–æ—Ä–æ –æ—Ç–≤–µ—Ç–∏—Ç. ‚è≥\n–ü–æ–∫–∞ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å ¬´–ü—Ä–∞–π—Å¬ª –∏–ª–∏ ¬´–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑¬ª.",
      "keyboard": [
        [
          {
            "text": "üíµ –ü—Ä–∞–π—Å",
            "goto": "price"
          },
          {
            "text": "üõ† –ó–∞–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª",
            "goto": "order_intro"
          }
        ],
        [
          {
            "text": "‚¨ÖÔ∏è –í –º–µ–Ω—é",
            "goto": "menu_main"
          }
        ]
      ]
    },
    "help": {
      "message": "–ö–æ–º–∞–Ω–¥—ã:\n/start ‚Äî –Ω–∞—á–∞–ª–æ\n/price ‚Äî –ø—Ä–∞–π—Å\n/order ‚Äî –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑\n/help ‚Äî –ø–æ–º–æ—â—å\n\n–ü–æ–ª–∏—Ç–∏–∫–∞: –ø–∏—à–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–º, –∫—Ç–æ –¥–∞–ª —Å–æ–≥–ª–∞—Å–∏–µ. –ú–æ–∂–Ω–æ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è —Å–ª–æ–≤–æ–º ¬´–°–¢–û–ü¬ª.",
      "keyboard": [
        [
          {
            "text": "‚¨ÖÔ∏è –í –Ω–∞—á–∞–ª–æ",
            "goto": "start"
          }
        ]
      ]
    }
  },
  "automations": {
    "on_new_user": {
      "action": "notify_admin",
      "payload": [
        "name",
        "city",
        "channels",
        "contact",
        "brands"
      ]
    },
    "on_order_created": {
      "action": [
        "notify_admin",
        "send_email"
      ],
      "email_subject": "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ —Ñ–∞–π–ª–∞",
      "email_fields": [
        "name",
        "contact",
        "order.*"
      ]
    },
    "on_support": {
      "action": "notify_admin"
    },
    "consent_keywords": [
      "—Å–æ–≥–ª–∞—Å–µ–Ω",
      "–¥–∞",
      "ok",
      "okay"
    ],
    "unsubscribe_keywords": [
      "—Å—Ç–æ–ø",
      "–æ—Ç–ø–∏—Å–∫–∞",
      "stop",
      "unsubscribe"
    ],
    "on_unsubscribe": {
      "action": "mark_do_not_disturb"
    }
  },
  "data_model": {
    "user": {
      "name": "string",
      "role": "workshop|freelancer|partner|null",
      "city": "string|null",
      "channels": [
        "telegram|whatsapp|email"
      ],
      "contact": "string",
      "brands": "string|null",
      "consent": "bool"
    },
    "order": {
      "brand_model": "string",
      "year": "string",
      "ecu": "string|null",
      "stage": "string",
      "file_or_comment": "file|text",
      "ticket_id": "string"
    },
    "support": {
      "message": "text|file",
      "status": "open|closed"
    }
  },
  "texts": {
    "consent_prompt": "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏, —á—Ç–æ —Å–æ–≥–ª–∞—Å–µ–Ω –ø–æ–ª—É—á–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã/–æ—Ç–≤–µ—Ç—ã (–º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å ¬´–°–æ–≥–ª–∞—Å–µ–Ω¬ª).",
    "unsubscribe_hint": "–ß—Ç–æ–±—ã –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–∞–ø–∏—à–∏ ¬´–°–¢–û–ü¬ª."
  }
}